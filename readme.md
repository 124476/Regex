# Регулярные выражения

## Шаблоны, соответствующие одному символу

| Шаблон | Описание | Пример | Применяем к тексту |
| ------------- | ------------- | ------------- | ------------- |
| . | Один любой символ, кроме новой строки \n | м.л.ко	| ***молоко***, ***малако***, И***м0л0ко***Ихлеб |
| \d | Любая цифра | СУ\d\d | ***СУ35***, ***СУ11***1, АЛ***СУ14*** |
| \D | Любой символ, кроме цифры | 926\D123 | ***926)123***, 1***926-123***4 |
| \s | Любой пробельный символ (пробел, табуляция, конец строки и т.п.) | бор\sода | ***бор ода***, ***борода***, борода |
| \S | Любой непробельный символ | \S123 | ***X123***, ***я123***, ***!123***456, 1 + 123456 |
| \w | Любая буква (то, что может быть частью слова), а также цифры и _ | \w\w\w | ***Год***, ***f_3***, ***qwer***t |
| \W | Любая не-буква, не-цифра и не подчёркивание | сом\W | ***сом!***, ***сом?*** |
| [..] | Один из символов в скобках, а также любой символ из диапазона a-b | [0-9][0-9A-Fa-f] | ***12***, ***1F***, ***4B*** |
| [^..] | Любой символ, кроме перечисленных | <[^>]> | ***<1>***, ***\<a\>***, <>> |
| \d≈[0-9],</br> \D≈[^0-9],</br> \w≈[0-9a-zA-Zа-яА-ЯёЁ],</br> \s≈[ \f\n\r\t\v]  | Буква “ё” не включается в общий диапазон букв! Вообще говоря, в \d включается всё, что в юникоде помечено как «цифра», а в \w — как буква. Ещё много всего! |	
| [abc-], [-1] | если нужен минус, его нужно указать последним или первым |
| [*[(+\\\\\\]\t] | внутри скобок нужно экранировать только ] и \ |
| \b | Начало или конец слова (слева пусто или не-буква, справа буква и наоборот). В отличие от предыдущих соответствует позиции, а не символу | \bвал | ***вал***, перевал, Перевалка |
| \B | Не граница слова: либо и слева, и справа буквы, либо и слева, и справа НЕ буквы | \Bвал | пере***вал***, вал, Пере***вал***ка |
| | | \Bвал\B | перевал, вал, Пере***вал***ка |

## Квантификаторы (указание количества повторений)

| Шаблон | Описание | Пример | Применяем к тексту |
| ------------- | ------------- | ------------- | ------------- |
| {n} | Ровно n повторений | \d{4} | 1, 12, 123, ***1234***, 12345 |
| {m,n} | От m до n повторений включительно | \d{2,4} | 1, ***12***, ***123***, ***1234***, 12345 |
| {m,} | Не менее m повторений | \d{3,} | 1, 12, ***123***, ***1234***, ***12345*** |
| {,n} | Не более n повторений | \d{,2} | ***1***, ***12***, ***12***3 |
| ? | Ноль или одно вхождение, синоним {0,1} | валы? | ***вал***, ***валы***, ***вал***ов |
| * | Ноль или более, синоним {0,} | СУ\d* | ***СУ***, ***СУ1***, ***СУ12***, ... |
| + | Одно или более, синоним {1,} | a\)+ | ***a)***, ***a))***, ***a)))***, b***a)***]) |
| *?</br> +?</br>??</br>{m,n}?</br>{,n}?</br>{m,}? | По умолчанию квантификаторы жадные — nзахватывают максимально возможное число символов. Добавление ? делает их ленивыми, они захватывают минимально возможное число символов | \(.*\)</br>\(.*?\) | ***(a + b) \* (c + d) \* (e + f)***</br>***(a + b)*** \* (c + d) * (e + f) |

## Примеры регулярок

```
Найдите все натуральные числа (возможно, окружённые буквами) - [0-9]*[1-9][0-9]*
Найдите все «слова», написанные капсом (то есть строго заглавными), возможно внутри настоящих слов (аааБББввв) - [A-ZА-ЯЁ]*
Найдите слова, в которых есть русская буква, а когда-нибудь за ней цифра - [а-яА-ЯёЁ]\d
Найдите все слова, начинающиеся с русской или латинской большой буквы (\b — граница слова) - \b\w.*
Найдите слова, которые начинаются на гласную (\b — граница слова) - \b[aeyuioёуеыаоэяиюAEYUIOЁУЕОЫАЯИЮ].*
Найдите строчки, в которых есть символ * (. — это точно не конец строки!) - .*\*.*
Найдите строчки, в которых есть открывающая и когда-нибудь потом закрывающая скобки - .*\(.*\).*
Выделите одним махом весь кусок оглавления (в конце примера, вместе с тегами) - .*
```

## Ругулярки в питоне 

| Функция | Её смысл |
|---------|----------|
| re.search(pattern, string) | Найти в строке string первую строчку, подходящую под шаблон pattern |
| re.fullmatch(pattern, string) | Проверить, подходит ли строка string под шаблон pattern |
| re.split(pattern, string, maxsplit=0)	Аналог str.split(), только разделение происходит по подстрокам, подходящим под шаблон pattern |
| re.findall(pattern, string) | Найти в строке string все непересекающиеся шаблоны pattern |
| re.finditer(pattern, string) | Итератор по всем непересекающимся шаблонам pattern в строке string (выдаются match-объекты) |
| re.sub(pattern, repl, string, count=0) | Заменить в строке string все непересекающиеся шаблоны pattern на repl |

## Песочница

```
https://regex101.com/r/aGn8QC/2
```

## Источники

```
https://habr.com/ru/articles/349860/
```